<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough" lang="en">

<h:body>
	<div class="modal fade" id="browseFolder" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
					<h3>Select Folder</h3>
				</div>
				<div class="modal-body">
					<h:form id="folderBrowserForm">
						<div class="input-group">
							<h:inputText value="#{folderBrowser.jumpToFolder}" required="true" styleClass="form-control currentFolder selectFolderButton" />
							<span class="input-group-btn"> <h:commandLink
									styleClass="btn btn-default"
									action="#{folderBrowser.changeFolder}">
									<i class="fa fa-external-link" />
									<f:ajax execute="@form" render="@form" />
								</h:commandLink>
							</span>
						</div>
						<ui:repeat value="#{folderBrowser.contents}" var="folder">
							<h:commandLink styleClass="btn btn-default"
								style="width:100%; text-align: left; overflow:auto;">
								<i class="fa fa-folder-open" />&nbsp;#{folder.label}
						    	<f:ajax execute="@this" render="@form"
									listener="#{folderBrowser.select(folder)}" />
							</h:commandLink>
						</ui:repeat>
						<ui:fragment rendered="#{folderBrowser.currentFolder.path != null}">
							<a href="#" class="btn btn-default btn-success" style="width: 100%; text-align: left;"
								onclick="window.browserTargetField.val('#{folderBrowser.currentFolder.pathString}');" data-dismiss="modal">
								Select&nbsp;#{folderBrowser.currentFolder.path}</a>
						</ui:fragment>
					</h:form>
				</div>
			</div>
		</div>
	</div>
</h:body>
</html>
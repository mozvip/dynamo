<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough" lang="en">

<h:body>
	<div class="modal fade" id="browseFile" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
					<h3>Select File</h3>
				</div>
				<div class="modal-body">
					<h:form id="fileBrowserForm">
						<div class="input-group">
							<h:inputText value="#{fileBrowser.jumpToFolder}" required="true" styleClass="form-control currentFolder selectFolderButton" />
							<span class="input-group-btn"> <h:commandLink
									styleClass="btn btn-default"
									action="#{fileBrowser.changeFolder}">
									<i class="fa fa-external-link" />
									<f:ajax execute="@form" render="@form" />
								</h:commandLink>
							</span>
						</div>
						<ui:repeat value="#{fileBrowser.contents}" var="item">
							<h:commandLink styleClass="btn btn-default" style="width:100%; text-align: left;" rendered="#{item.folder}">
								<i class="fa fa-folder-open" />&nbsp;#{item.label}
						    	<f:ajax execute="@this" render="@form" listener="#{fileBrowser.select(item)}" />
							</h:commandLink>
							<ui:fragment rendered="#{!item.folder}">
								<a class="btn btn-success" style="width:100%; text-align: left;" onclick="window.browserTargetField.val('#{item.pathString}');" data-dismiss="modal">
									<i class="fa fa-check" />&nbsp;#{item.label}
								</a>
							</ui:fragment>
						</ui:repeat>
					</h:form>
				</div>
			</div>
		</div>
	</div>
</h:body>
</html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough">

<h:body>
	<ui:composition template="/template.xhtml">
		<ui:define name="title">
			Configuration
       	</ui:define>

		<ui:define name="content">
		
			<ui:include src="fragment-fileBrowser.xhtml" />
			<ui:include src="fragment-folderBrowser.xhtml" />

			<div class="col-xs-12">
				<h:form p:role="form" styleClass="form-horizontal" id="configurationForm">
					<h:commandLink action="#{configuration.saveConfigurationItems}"
						styleClass="btn btn-success" style="width: 100%;">
						<i class="fa fa-save" />&nbsp;Save Configuration
						<f:ajax execute="@all" render="@form :navbar :messages"></f:ajax>
					</h:commandLink>
					<ui:repeat var="category" value="#{configuration.categories}">
						<ui:include src="configuration-category.xhtml">
							<ui:param name="category" value="#{category}" />
						</ui:include>
					</ui:repeat>
				</h:form>
			</div>
		</ui:define>

		<ui:define name="custom_js">
			<script>
				function initPage() {
					$('*[aria-expanded=true]').closest('.panel-default').find('.collapse').addClass('in');
					$('*[aria-expanded=false]').closest('.panel-default').find(
							'.collapse').removeClass('in');
					
					$('.panel-group').on('hide.bs.collapse', function () {
						$(this).find('.stateInput').val('false');
					});					

					$('.panel-group').on('show.bs.collapse', function () {
						$(this).find('.stateInput').val('true');
					});					
				}

				function removeParentRow(data) {
					if (data.status == 'begin') {
						$(data.source).closest('tr').remove();
					}
				}
			</script>
		</ui:define>

	</ui:composition>
</h:body>
</html>
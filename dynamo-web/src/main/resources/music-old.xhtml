<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:c="http://java.sun.com/jsp/jstl/core">

<ui:composition template="/template.xhtml">

	<ui:define name="title">
		Music
    </ui:define>

	<ui:define name="content">
		<ul class="nav nav-tabs" id="music_tab">
			<li><a href="#artists" data-toggle="tab">Artists</a></li>
			<li><a href="#newalbum" data-toggle="tab">New Album</a></li>
			<li><a href="#folderImport" data-toggle="tab">Folder Import</a></li>
		</ul>

		<style>
			.caption {
				font-size: 12px;
			}
			.albumThumb {
				height: 225px; margin: 0px; border: none;
			}
			.albumName {
				overflow: hidden;
				white-space: nowrap;
				display: block;
				font-weight: bold;
			}
			.artistName {
				overflow: hidden;
				white-space: nowrap;
				display: block;
				font-weight: bold;
			}
			.albumGenre {
				overflow: hidden;
				white-space: nowrap;
			}		
		</style>

		<div id="artistEdit" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
			aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
						<h3>Rename Artist</h3>
					</div>
					<div class="modal-body">
						<h:form styleClass="form-inline" p:role="form">
							<h:inputText styleClass="editArtistName" value="#{music.origArtistName}" style="display:none" />
							<div class="input-group">
								<h:inputText styleClass="editArtistName typeahead form-control artist" value="#{music.editArtistName}" required="true" />
								<span class="input-group-btn">
									<h:commandLink action="#{music.renameArtist}" styleClass="btn btn-primary">
										<i class="icon-save" />&nbsp;Rename Artist
									</h:commandLink>
								</span>
							</div>
						</h:form>
					</div>
				</div>
			</div>
		</div>

		<div class="tab-content">
			<div class="tab-pane" id="artists">
				<h:form>
					<h:inputText value="#{music.artistsSearchFilter}" id="artistName" styleClass="form-control artist" p:placeholder="Artist" />
					<h:commandLink styleClass="suggestionButton" action="#{music.refreshArtists}">
						<f:ajax execute="@form" render=":artistsTable" />
					</h:commandLink>
				</h:form>
				<h:dataTable id="artistsTable" value="#{music.artists}" var="artist" styleClass="table">
					<h:column>
						<f:facet name="header">Artist</f:facet>
						<h:outputLink styleClass="btn btn-xs btn-default" p:data-toggle="modal"
							p:data-target="#artistEdit" value="#" onclick="$('.editArtistName').val('#{artist.name}');">
							<i class="fa fa-edit" />
						</h:outputLink>
						<h:link outcome="music-artist">
							<f:param name="name" value="#{artist.name}" />
							#{artist.name}
						</h:link>
					</h:column>
				</h:dataTable>
			</div>
			<div class="tab-pane" id="newalbum">
					<h:form p:role="form">
				<div class="panel panel-default">
				<div class="panel-body">				
	
						<div class="form-group">
							<h:outputLabel styleClass="control-label" for="newAlbumFolder" value="Add to folder" />
							<div class="input-group">
								<span class="input-group-addon"><i class="fa fa-folder-open-o" /></span>
								<h:selectOneMenu id="newAlbumFolder" value="#{music.destinationPathForNewAlbum}" required="true"
									styleClass="form-control" converter="PathConverter">
									<f:selectItems value="#{music.allFolders}" />
								</h:selectOneMenu>
							</div>
						</div>
						<div class="form-group">
							<h:outputLabel styleClass="control-label" for="newAlbumArtist" value="Album Artist" />
							<div class="controls">
								<h:inputText id="newAlbumArtist" label="Album Artist" styleClass="form-control artist"
									value="#{music.newMusicAlbumArtistName}" required="true" />
							</div>
						</div>
						<div class="form-group">
							<h:outputLabel styleClass="control-label" for="newAlbum" value="Album" />
							<h:inputText id="newAlbum" value="#{music.newMusicAlbumName}" label="Album" required="true"
								styleClass="form-control" />
						</div>
					</div>
					<div class="panel-footer">
						<h:commandLink styleClass="btn btn-primary" action="#{music.addNewAlbum}">
							<i class="fa fa-plus" />&nbsp;Add New Album
						</h:commandLink>
					</div>
				</div>
					</h:form>
			</div>
			<div class="tab-pane" id="folderImport">
						<h:form p:role="form">
				<div class="panel panel-default">
					<div class="panel-body">
							<div class="form-group">
								<h:outputLabel styleClass="control-label" for="importFromFolder" value="Folder to import" />
								<div class="input-group">
									<span class="input-group-addon"><i class="fa fa-folder-open-o" /></span>
									<h:inputText id="importFromFolder" value="#{music.importFromFolder}" label="Import from folder" required="true" styleClass="form-control" />
									<div class="input-group-btn">
										<a class="btn btn-default" href="#"><i class="fa fa-search" /></a>
									</div>
								</div>
							</div>
							<div class="checkbox">
								<label>
									<h:selectBooleanCheckbox value="#{music.keepSourceFiles}" />
									Keep Source Files
								</label>
							</div>
						<div class="panel-footer">
							<h:commandLink styleClass="btn btn-primary" action="#{music.importFolder}">
								<i class="fa fa-upload" />&nbsp;Import
							</h:commandLink>
						</div>							
					</div>
				</div>
						</h:form>
			</div>
		</div>
	</ui:define>
</ui:composition>

</html>